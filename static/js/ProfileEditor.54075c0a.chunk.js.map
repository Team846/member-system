{"version":3,"sources":["routes/private/ProfileEditor.js","components/Button.js","components/Input.js","components/Dashboard.js"],"names":["ProfileEditor","generateInputFromUserProfileField","userProfileField","profile","_this","state","condition","key","type","props","Object","_home_travis_build_Team846_member_system_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_14___default","a","createElement","_material_ui_core_es_Typography_Typography__WEBPACK_IMPORTED_MODULE_16__","variant","label","_material_ui_core__WEBPACK_IMPORTED_MODULE_11__","container","spacing","content","map","inputDescriptor","item","xs","length","_components_Input__WEBPACK_IMPORTED_MODULE_13__","assign","onChange","onProfileFieldChange","value","name","e","setState","_home_travis_build_Team846_member_system_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","_home_travis_build_Team846_member_system_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","currentUser","firebase","auth","Backup Phone Type","Email","email","Gender","Name","displayName","Permission Level","permissionLevels","Primary Phone Number","Primary Phone Type","Role","Teams","updateProfile","enqueueSnackbar","preventDefault","firestore","doc","concat","uid","set","then","catch","message","_this2","this","unsubscribe","onSnapshot","snapshot","data","classes","_components_Dashboard__WEBPACK_IMPORTED_MODULE_9__","title","justify","md","lg","className","paper","onSubmit","userProfileFields","_components_Button__WEBPACK_IMPORTED_MODULE_8__","Component","styles","theme","padding","unit","withStyles","withSnackbar","Button","noMarginTop","other","_home_travis_build_Team846_member_system_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_2___default","_material_ui_core__WEBPACK_IMPORTED_MODULE_1__","fullWidth","color","style","marginTop","defaultProps","Input","inputLabelRef","labelWidth","ReactDOM","findDOMNode","offsetWidth","_this$props","options","react__WEBPACK_IMPORTED_MODULE_7___default","_material_ui_core__WEBPACK_IMPORTED_MODULE_6__","margin","ref","input","option","Dashboard","closeDrawer","open","openDrawer","children","react__WEBPACK_IMPORTED_MODULE_8___default","_settings__WEBPACK_IMPORTED_MODULE_6__","Consumer","activeUser","react__WEBPACK_IMPORTED_MODULE_8__","_material_ui_core__WEBPACK_IMPORTED_MODULE_7__","toolbar","menuButton","onClick","_material_ui_icons__WEBPACK_IMPORTED_MODULE_9__","component","drawerPaper","onClose","values","routes","private","route","indexOf","minPermissionLevel","button","path","history","push","contentSpacer","_home_travis_build_Team846_member_system_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","mixins","width","marginLeft","marginRight","alignItems","display","withRouter"],"mappings":"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","file":"static/js/ProfileEditor.54075c0a.chunk.js","sourcesContent":["import Button from \"../../components/Button\";\nimport Dashboard from \"../../components/Dashboard\";\nimport firebase from \"firebase/app\";\nimport {Grid, Paper, withStyles} from \"@material-ui/core\";\nimport Input from \"../../components/Input\";\nimport React, {Component} from \"react\";\nimport {permissionLevels, userProfileFields} from \"../../settings\";\nimport Typography from \"@material-ui/core/es/Typography/Typography\";\nimport {withSnackbar} from \"notistack\";\nimport * as PropTypes from \"prop-types\";\n\nclass ProfileEditor extends Component {\n    componentDidMount() {\n        this.unsubscribe =\n            firebase.firestore().doc(`users/${firebase.auth().currentUser.uid}`)\n                .onSnapshot(snapshot => {\n                    this.setState({\n                        profile: snapshot.data() || this.state.profile\n                    });\n                });\n    }\n\n    componentWillUnmount() {\n        this.unsubscribe();\n    }\n\n    generateInputFromUserProfileField = userProfileField => {\n        const profile = this.state.profile;\n\n        const {condition, key, type, ...props} = userProfileField;\n\n        if (!condition(profile)) return null;\n\n        if (type === \"multi-input-field\") {\n            return (\n                <div key={key}>\n                    <Typography variant={\"h6\"}>{userProfileField.label}</Typography>\n                    <Grid container spacing={8}>\n                        {userProfileField.content\n                            .map(inputDescriptor => (\n                                <Grid key={inputDescriptor.key} item xs={12 / userProfileField.content.length}>\n                                    {this.generateInputFromUserProfileField(inputDescriptor)}\n                                </Grid>\n                            ))}\n                    </Grid>\n                </div>\n            );\n        } else if (type === \"group\") {\n            return (\n                <div key={key}>\n                    <Typography variant={\"h6\"}>{userProfileField.label}</Typography>\n                    {userProfileField.content.map(this.generateInputFromUserProfileField)}\n                </div>\n            );\n        } else {\n            return (\n                <Input\n                    key={key}\n                    onChange={this.onProfileFieldChange(key)}\n                    type={type}\n                    value={profile[key] || \"\"}\n                    {...props}/>\n            );\n        }\n    };\n\n    onProfileFieldChange = name => e => {\n        this.setState({\n            profile: {\n                ...this.state.profile,\n                [name]: e.target.value\n            }\n        })\n    };\n\n    static propTypes = {\n        classes: PropTypes.object.isRequired,\n        enqueueSnackbar: PropTypes.func.isRequired\n    };\n\n    render() {\n        const {classes} = this.props;\n\n        return (\n            <Dashboard title=\"Profile Editor\">\n                <Grid container justify=\"center\">\n                    <Grid item xs={12} md={8} lg={6}>\n                        <Paper className={classes.paper}>\n                            <form onSubmit={this.updateProfile}>\n                                {userProfileFields.map(this.generateInputFromUserProfileField)}\n                                <Button type=\"submit\">Update my profile</Button>\n                            </form>\n                        </Paper>\n                    </Grid>\n                </Grid>\n            </Dashboard>\n        );\n    }\n\n    state = (() => {\n        const {currentUser} = firebase.auth();\n        return {\n            profile: {\n                \"Backup Phone Type\": \"Home\",\n                Email: currentUser.email,\n                Gender: \"Male\",\n                Name: currentUser.displayName,\n                \"Permission Level\": permissionLevels[0],\n                \"Primary Phone Number\": \"(408) 480-2845\",\n                \"Primary Phone Type\": \"Cell\",\n                Role: \"Student\",\n                Teams: [],\n            }\n        };\n    })();\n\n    static styles = theme => ({\n        paper: {\n            padding: theme.spacing.unit * 2\n        }\n    });\n\n    updateProfile = e => {\n        const {enqueueSnackbar} = this.props;\n        e.preventDefault();\n        firebase.firestore().doc(`users/${firebase.auth().currentUser.uid}`)\n            .set(this.state.profile)\n            .then(() => enqueueSnackbar(\"Updated profile\"))\n            .catch(e => enqueueSnackbar(e.message, {\n                variant: \"error\"\n            }));\n    }\n}\n\nexport default withStyles(ProfileEditor.styles)(withSnackbar(ProfileEditor));","import * as PropTypes from \"prop-types\";\nimport {Button as MuiButton} from \"@material-ui/core\";\nimport React from \"react\";\n\nfunction Button(props) {\n    const {noMarginTop, ...other} = props;\n\n    return (\n        <MuiButton\n            fullWidth\n            color=\"primary\"\n            style={{\n                marginTop: noMarginTop ? 8 : 24\n            }}\n            variant=\"contained\"\n            {...other}/>\n    );\n}\n\nButton.defaultProps = {\n    noMarginTop: false\n};\n\nButton.propTypes = {\n    noMarginTop: PropTypes.bool\n};\n\nexport default Button;","import {FormControl, InputLabel, MenuItem, OutlinedInput, Select, TextField} from \"@material-ui/core\";\nimport React, {Component} from \"react\";\nimport ReactDOM from \"react-dom\";\n\nclass Input extends Component {\n    inputLabelRef = null;\n\n    componentDidMount() {\n        if (this.inputLabelRef) {\n            this.setState({\n                labelWidth: ReactDOM.findDOMNode(this.inputLabelRef).offsetWidth\n            });\n        }\n    }\n\n    render() {\n        const {label, options, type, ...other} = this.props;\n\n        if (type === \"select\") {\n            return (\n                <FormControl\n                    fullWidth\n                    margin=\"normal\"\n                    variant=\"outlined\">\n                    <InputLabel\n                        ref={ref => this.inputLabelRef = ref}\n                        variant=\"outlined\">\n                        {label}\n                    </InputLabel>\n                    <Select\n                        input={\n                            <OutlinedInput labelWidth={this.state.labelWidth}/>\n                        }\n                        variant=\"outlined\"\n                        {...other}>\n                        {options.map(option => <MenuItem key={option} value={option}>{option}</MenuItem>)}\n                    </Select>\n                </FormControl>\n            )\n        } else {\n            return (\n                <TextField\n                    fullWidth\n                    margin=\"normal\"\n                    variant=\"outlined\"\n                    {...this.props}/>\n            )\n        }\n    }\n\n    state = {\n        labelWidth: 0\n    };\n}\n\nexport default Input;","import * as PropTypes from 'prop-types';\nimport {ActiveUser, permissionLevels} from \"../settings\";\nimport {AppBar, Toolbar, Typography, Drawer, IconButton, List, ListItem, ListItemText} from '@material-ui/core';\nimport React, {Component, Fragment} from 'react';\nimport {Menu} from \"@material-ui/icons\";\nimport {withStyles} from '@material-ui/core/styles';\nimport {routes} from \"../settings\";\nimport {withRouter} from \"react-router-dom\";\n\nclass Dashboard extends Component {\n    closeDrawer = () => {\n        this.setState({\n            open: false\n        });\n    };\n\n    openDrawer = () => {\n        this.setState({\n            open: true\n        });\n    };\n\n    static propTypes = {\n        children: PropTypes.any.isRequired,\n        classes: PropTypes.object.isRequired,\n        title: PropTypes.string.isRequired\n    };\n\n    render() {\n        const {children, classes, title} = this.props;\n        return (\n            <ActiveUser.Consumer>{\n                activeUser => (\n                    <Fragment>\n                        <AppBar>\n                            <Toolbar className={classes.toolbar}>\n                                <IconButton className={classes.menuButton} color=\"inherit\" onClick={this.openDrawer}>\n                                    <Menu/>\n                                </IconButton>\n                                <Typography color=\"inherit\" component=\"h1\" variant=\"h5\">{title}</Typography>\n                            </Toolbar>\n                        </AppBar>\n                        <Drawer classes={{paper: classes.drawerPaper}} onClose={this.closeDrawer} open={this.state.open}\n                                variant=\"temporary\">\n                            <List>\n                                <ListItem>\n                                    <ListItemText>\n                                        <Typography variant=\"h5\">Member System</Typography>\n                                    </ListItemText>\n                                </ListItem>\n                                {Object.values(routes.private).map(route => permissionLevels.indexOf(activeUser[\"Permission Level\"]) > route.minPermissionLevel || \"Standard\"\n                                    ? <ListItem button key={route.path}\n                                                onClick={() => this.props.history.push(route.path)}>\n                                        <ListItemText>{route.label}</ListItemText>\n                                    </ListItem>\n                                    : null)}\n                            </List>\n                        </Drawer>\n                        <div className={classes.contentSpacer}/>\n                        {children}\n                    </Fragment>\n                )\n            }</ActiveUser.Consumer>\n        );\n    }\n\n    state = {\n        open: false\n    };\n\n    static styles = theme => ({\n        contentSpacer: {\n            ...theme.mixins.toolbar\n        },\n        drawerPaper: {\n            width: 300\n        },\n        menuButton: {\n            marginLeft: -12,\n            marginRight: theme.spacing.unit\n        },\n        toolbar: {\n            alignItems: \"center\",\n            display: \"flex\"\n        }\n    });\n}\n\nexport default withStyles(Dashboard.styles)(withRouter(Dashboard));\n"],"sourceRoot":""}