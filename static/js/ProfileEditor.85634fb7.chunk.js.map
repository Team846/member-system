{"version":3,"sources":["routes/private/ProfileEditor.js","components/Button.js","components/Input.js","components/Dashboard.js"],"names":["ProfileEditor","generateInputFromUserProfileField","userProfileField","profile","_this","state","condition","key","type","props","Object","_home_travis_build_Team846_member_system_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_14___default","a","createElement","_material_ui_core_es_Typography_Typography__WEBPACK_IMPORTED_MODULE_16__","variant","label","_material_ui_core__WEBPACK_IMPORTED_MODULE_11__","container","spacing","content","map","inputDescriptor","item","xs","length","_components_Input__WEBPACK_IMPORTED_MODULE_13__","assign","onChange","onProfileFieldChange","value","name","e","setState","_home_travis_build_Team846_member_system_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","_home_travis_build_Team846_member_system_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","currentUser","firebase","auth","Backup Phone Type","Email","email","Gender","Name","displayName","Permission Level","permissionLevels","Primary Phone Number","Primary Phone Type","Role","Teams","updateProfile","enqueueSnackbar","preventDefault","firestore","doc","concat","uid","set","then","catch","message","_this2","this","match","params","unsubscribe","onSnapshot","snapshot","data","classes","_components_Dashboard__WEBPACK_IMPORTED_MODULE_9__","title","justify","md","lg","className","paper","onSubmit","userProfileFields","_components_Button__WEBPACK_IMPORTED_MODULE_8__","Component","styles","theme","padding","unit","withStyles","withSnackbar","Button","noMarginTop","other","_home_travis_build_Team846_member_system_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_2___default","_material_ui_core__WEBPACK_IMPORTED_MODULE_1__","fullWidth","color","style","marginTop","defaultProps","Input","inputLabelRef","labelWidth","ReactDOM","findDOMNode","offsetWidth","_this$props","options","react__WEBPACK_IMPORTED_MODULE_7___default","_material_ui_core__WEBPACK_IMPORTED_MODULE_6__","margin","ref","input","option","Dashboard","closeDrawer","open","openDrawer","children","react__WEBPACK_IMPORTED_MODULE_8___default","_settings__WEBPACK_IMPORTED_MODULE_6__","Consumer","activeUser","react__WEBPACK_IMPORTED_MODULE_8__","_material_ui_core__WEBPACK_IMPORTED_MODULE_7__","toolbar","menuButton","onClick","_material_ui_icons__WEBPACK_IMPORTED_MODULE_9__","component","drawerPaper","onClose","values","routes","private","route","indexOf","minPermissionLevel","button","path","history","push","contentSpacer","_home_travis_build_Team846_member_system_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","mixins","width","marginLeft","marginRight","alignItems","display","withRouter"],"mappings":"iRAWMA,6MAgBFC,kCAAoC,SAAAC,GAChC,IAAMC,EAAUC,EAAKC,MAAMF,QAEpBG,EAAkCJ,EAAlCI,UAAWC,EAAuBL,EAAvBK,IAAKC,EAAkBN,EAAlBM,KAASC,EAHoBC,OAAAC,EAAA,EAAAD,CAGXR,EAHW,4BAKpD,OAAKI,EAAUH,GAEF,sBAATK,EAEII,EAAAC,EAAAC,cAAA,OAAKP,IAAKA,GACNK,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAYC,QAAS,MAAOd,EAAiBe,OAC7CL,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,GACpBlB,EAAiBmB,QACbC,IAAI,SAAAC,GAAe,OAChBX,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAMX,IAAKgB,EAAgBhB,IAAKiB,MAAI,EAACC,GAAI,GAAKvB,EAAiBmB,QAAQK,QAClEtB,EAAKH,kCAAkCsB,QAMhD,UAATf,EAEHI,EAAAC,EAAAC,cAAA,OAAKP,IAAKA,GACNK,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAYC,QAAS,MAAOd,EAAiBe,OAC5Cf,EAAiBmB,QAAQC,IAAIlB,EAAKH,oCAKvCW,EAAAC,EAAAC,cAACa,EAAA,EAADjB,OAAAkB,OAAA,CACIrB,IAAKA,EACLsB,SAAUzB,EAAK0B,qBAAqBvB,GACpCC,KAAMA,EACNuB,MAAO5B,EAAQI,IAAQ,IACnBE,IA9BgB,QAmCpCqB,qBAAuB,SAAAE,GAAI,OAAI,SAAAC,GAC3B7B,EAAK8B,SAAS,CACV/B,QAAQO,OAAAyB,EAAA,EAAAzB,CAAA,GACDN,EAAKC,MAAMF,QADXO,OAAA0B,EAAA,EAAA1B,CAAA,GAEFsB,EAAOC,EAAEI,OAAON,cA6B7B1B,MAAS,WAAM,IACJiC,EAAeC,IAASC,OAAxBF,YACP,MAAO,CACHnC,QAAS,CACLsC,oBAAqB,OACrBC,MAAOJ,EAAYK,MACnBC,OAAQ,OACRC,KAAMP,EAAYQ,YAClBC,mBAAoBC,IAAiB,GACrCC,uBAAwB,iBACxBC,qBAAsB,OACtBC,KAAM,UACNC,MAAO,KAZV,KAuBTC,cAAgB,SAAApB,GAAK,IACVqB,EAAmBlD,EAAKK,MAAxB6C,gBACPrB,EAAEsB,iBACFhB,IAASiB,YAAYC,IAArB,SAAAC,OAAkCtD,EAAKuD,MAClCC,IAAIxD,EAAKC,MAAMF,SACf0D,KAAK,kBAAMP,EAAgB,qBAC3BQ,MAAM,SAAA7B,GAAC,OAAIqB,EAAgBrB,EAAE8B,QAAS,CACnC/C,QAAS,gGAtHD,IAAAgD,EAAAC,KAChBA,KAAKN,IAAMM,KAAKxD,MAAMyD,MAAMC,OAAOR,KAAOpB,IAASC,OAAOF,YAAYqB,IACtEM,KAAKG,YACD7B,IAASiB,YAAYC,IAArB,SAAAC,OAAkCO,KAAKN,MAClCU,WAAW,SAAAC,GACRN,EAAK9B,SAAS,CACV/B,QAASmE,EAASC,QAAUP,EAAK3D,MAAMF,2DAMvD8D,KAAKG,+CAyDA,IACEI,EAAWP,KAAKxD,MAAhB+D,QAEP,OACI5D,EAAAC,EAAAC,cAAC2D,EAAA,EAAD,CAAWC,MAAM,kBACb9D,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAMC,WAAS,EAACwD,QAAQ,UACpB/D,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAMM,MAAI,EAACC,GAAI,GAAImD,GAAI,EAAGC,GAAI,GAC1BjE,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAO4D,UAAWN,EAAQO,OACtBnE,EAAAC,EAAAC,cAAA,QAAMkE,SAAUf,KAAKZ,eAChB4B,IAAkB3D,IAAI2C,KAAKhE,mCAC5BW,EAAAC,EAAAC,cAACoE,EAAA,EAAD,CAAQ1E,KAAK,UAAb,iCAhFJ2E,aAAtBnF,EA0GKoF,OAAS,SAAAC,GAAK,MAAK,CACtBN,MAAO,CACHO,QAA8B,EAArBD,EAAMjE,QAAQmE,QAgBpBC,+BAAWxF,EAAcoF,OAAzBI,CAAiCC,uBAAazF,0ECnI7D,SAAS0F,EAAOjF,GAAO,IACZkF,EAAyBlF,EAAzBkF,YAAgBC,EADJlF,OAAAmF,EAAA,EAAAnF,CACaD,EADb,iBAGnB,OACIqF,EAAAjF,EAAAC,cAACiF,EAAA,EAADrF,OAAAkB,OAAA,CACIoE,WAAS,EACTC,MAAM,UACNC,MAAO,CACHC,UAAWR,EAAc,EAAI,IAEjC3E,QAAQ,aACJ4E,IAIhBF,EAAOU,aAAe,CAClBT,aAAa,GAOFD,0ICvBTW,6MACFC,cAAgB,OA6ChBjG,MAAQ,CACJkG,WAAY,sFA3CRtC,KAAKqC,eACLrC,KAAK/B,SAAS,CACVqE,WAAYC,IAASC,YAAYxC,KAAKqC,eAAeI,+CAKxD,IAAA1C,EAAAC,KAAA0C,EACoC1C,KAAKxD,MAAvCQ,EADF0F,EACE1F,MAAO2F,EADTD,EACSC,QAASpG,EADlBmG,EACkBnG,KAASoF,EAD3BlF,OAAAmF,EAAA,EAAAnF,CAAAiG,EAAA,4BAGL,MAAa,WAATnG,EAEIqG,EAAAhG,EAAAC,cAACgG,EAAA,EAAD,CACId,WAAS,EACTe,OAAO,SACP/F,QAAQ,YACR6F,EAAAhG,EAAAC,cAACgG,EAAA,EAAD,CACIE,IAAK,SAAAA,GAAG,OAAIhD,EAAKsC,cAAgBU,GACjChG,QAAQ,YACPC,GAEL4F,EAAAhG,EAAAC,cAACgG,EAAA,EAADpG,OAAAkB,OAAA,CACIqF,MACIJ,EAAAhG,EAAAC,cAACgG,EAAA,EAAD,CAAeP,WAAYtC,KAAK5D,MAAMkG,aAE1CvF,QAAQ,YACJ4E,GACHgB,EAAQtF,IAAI,SAAA4F,GAAM,OAAIL,EAAAhG,EAAAC,cAACgG,EAAA,EAAD,CAAUvG,IAAK2G,EAAQnF,MAAOmF,GAASA,OAMtEL,EAAAhG,EAAAC,cAACgG,EAAA,EAADpG,OAAAkB,OAAA,CACIoE,WAAS,EACTe,OAAO,SACP/F,QAAQ,YACJiD,KAAKxD,eAzCT0E,aAmDLkB,4JC9CTc,6MACFC,YAAc,WACVhH,EAAK8B,SAAS,CACVmF,MAAM,OAIdC,WAAa,WACTlH,EAAK8B,SAAS,CACVmF,MAAM,OAgDdhH,MAAQ,CACJgH,MAAM,2EAvCD,IAAArD,EAAAC,KAAA0C,EAC8B1C,KAAKxD,MAAjC8G,EADFZ,EACEY,SAAU/C,EADZmC,EACYnC,QAASE,EADrBiC,EACqBjC,MAC1B,OACI8C,EAAA3G,EAAAC,cAAC2G,EAAA,EAAWC,SAAZ,KACI,SAAAC,GAAU,OACNH,EAAA3G,EAAAC,cAAC8G,EAAA,SAAD,KACIJ,EAAA3G,EAAAC,cAAC+G,EAAA,EAAD,KACIL,EAAA3G,EAAAC,cAAC+G,EAAA,EAAD,CAAS/C,UAAWN,EAAQsD,SACxBN,EAAA3G,EAAAC,cAAC+G,EAAA,EAAD,CAAY/C,UAAWN,EAAQuD,WAAY9B,MAAM,UAAU+B,QAAShE,EAAKsD,YACrEE,EAAA3G,EAAAC,cAACmH,EAAA,EAAD,OAEJT,EAAA3G,EAAAC,cAAC+G,EAAA,EAAD,CAAY5B,MAAM,UAAUiC,UAAU,KAAKlH,QAAQ,MAAM0D,KAGjE8C,EAAA3G,EAAAC,cAAC+G,EAAA,EAAD,CAAQrD,QAAS,CAACO,MAAOP,EAAQ2D,aAAcC,QAASpE,EAAKoD,YAAaC,KAAMrD,EAAK3D,MAAMgH,KACnFrG,QAAQ,aACZwG,EAAA3G,EAAAC,cAAC+G,EAAA,EAAD,KACIL,EAAA3G,EAAAC,cAAC+G,EAAA,EAAD,KACIL,EAAA3G,EAAAC,cAAC+G,EAAA,EAAD,KACIL,EAAA3G,EAAAC,cAAC+G,EAAA,EAAD,CAAY7G,QAAQ,MAApB,mBAGPN,OAAO2H,OAAOC,IAAOC,SAASjH,IAAI,SAAAkH,GAAK,OAAIxF,IAAiByF,QAAQd,EAAW,qBAAuBa,EAAME,mBACvGlB,EAAA3G,EAAAC,cAAC+G,EAAA,EAAD,CAAUc,QAAM,EAACpI,IAAKiI,EAAMI,KAClBZ,QAAS,kBAAMhE,EAAKvD,MAAMoI,QAAQC,KAAKN,EAAMI,QACrDpB,EAAA3G,EAAAC,cAAC+G,EAAA,EAAD,KAAeW,EAAMvH,YAKrCuG,EAAA3G,EAAAC,cAAA,OAAKgE,UAAWN,EAAQuE,gBACvBxB,YAlDDpC,aAAlBgC,EA6DK/B,OAAS,SAAAC,GAAK,MAAK,CACtB0D,cAAcrI,OAAAsI,EAAA,EAAAtI,CAAA,GACP2E,EAAM4D,OAAOnB,SAEpBK,YAAa,CACTe,MAAO,KAEXnB,WAAY,CACRoB,YAAa,GACbC,YAAa/D,EAAMjE,QAAQmE,MAE/BuC,QAAS,CACLuB,WAAY,SACZC,QAAS,UAKN9D,yBAAW2B,EAAU/B,OAArBI,CAA6B+D,YAAWpC","file":"static/js/ProfileEditor.85634fb7.chunk.js","sourcesContent":["import Button from \"../../components/Button\";\nimport Dashboard from \"../../components/Dashboard\";\nimport firebase from \"firebase/app\";\nimport {Grid, Paper, withStyles} from \"@material-ui/core\";\nimport Input from \"../../components/Input\";\nimport React, {Component} from \"react\";\nimport {permissionLevels, userProfileFields} from \"../../settings\";\nimport Typography from \"@material-ui/core/es/Typography/Typography\";\nimport {withSnackbar} from \"notistack\";\nimport * as PropTypes from \"prop-types\";\n\nclass ProfileEditor extends Component {\n    componentDidMount() {\n        this.uid = this.props.match.params.uid || firebase.auth().currentUser.uid;\n        this.unsubscribe =\n            firebase.firestore().doc(`users/${this.uid}`)\n                .onSnapshot(snapshot => {\n                    this.setState({\n                        profile: snapshot.data() || this.state.profile\n                    });\n                });\n    }\n\n    componentWillUnmount() {\n        this.unsubscribe();\n    }\n\n    generateInputFromUserProfileField = userProfileField => {\n        const profile = this.state.profile;\n\n        const {condition, key, type, ...props} = userProfileField;\n\n        if (!condition(profile)) return null;\n\n        if (type === \"multi-input-field\") {\n            return (\n                <div key={key}>\n                    <Typography variant={\"h6\"}>{userProfileField.label}</Typography>\n                    <Grid container spacing={8}>\n                        {userProfileField.content\n                            .map(inputDescriptor => (\n                                <Grid key={inputDescriptor.key} item xs={12 / userProfileField.content.length}>\n                                    {this.generateInputFromUserProfileField(inputDescriptor)}\n                                </Grid>\n                            ))}\n                    </Grid>\n                </div>\n            );\n        } else if (type === \"group\") {\n            return (\n                <div key={key}>\n                    <Typography variant={\"h6\"}>{userProfileField.label}</Typography>\n                    {userProfileField.content.map(this.generateInputFromUserProfileField)}\n                </div>\n            );\n        } else {\n            return (\n                <Input\n                    key={key}\n                    onChange={this.onProfileFieldChange(key)}\n                    type={type}\n                    value={profile[key] || \"\"}\n                    {...props}/>\n            );\n        }\n    };\n\n    onProfileFieldChange = name => e => {\n        this.setState({\n            profile: {\n                ...this.state.profile,\n                [name]: e.target.value\n            }\n        })\n    };\n\n    static propTypes = {\n        classes: PropTypes.object.isRequired,\n        enqueueSnackbar: PropTypes.func.isRequired\n    };\n\n    render() {\n        const {classes} = this.props;\n\n        return (\n            <Dashboard title=\"Profile Editor\">\n                <Grid container justify=\"center\">\n                    <Grid item xs={12} md={8} lg={6}>\n                        <Paper className={classes.paper}>\n                            <form onSubmit={this.updateProfile}>\n                                {userProfileFields.map(this.generateInputFromUserProfileField)}\n                                <Button type=\"submit\">Update my profile</Button>\n                            </form>\n                        </Paper>\n                    </Grid>\n                </Grid>\n            </Dashboard>\n        );\n    }\n\n    state = (() => {\n        const {currentUser} = firebase.auth();\n        return {\n            profile: {\n                \"Backup Phone Type\": \"Home\",\n                Email: currentUser.email,\n                Gender: \"Male\",\n                Name: currentUser.displayName,\n                \"Permission Level\": permissionLevels[0],\n                \"Primary Phone Number\": \"(408) 480-2845\",\n                \"Primary Phone Type\": \"Cell\",\n                Role: \"Student\",\n                Teams: [],\n            }\n        };\n    })();\n\n    static styles = theme => ({\n        paper: {\n            padding: theme.spacing.unit * 2\n        }\n    });\n\n    updateProfile = e => {\n        const {enqueueSnackbar} = this.props;\n        e.preventDefault();\n        firebase.firestore().doc(`users/${this.uid}`)\n            .set(this.state.profile)\n            .then(() => enqueueSnackbar(\"Updated profile\"))\n            .catch(e => enqueueSnackbar(e.message, {\n                variant: \"error\"\n            }));\n    }\n}\n\nexport default withStyles(ProfileEditor.styles)(withSnackbar(ProfileEditor));","import * as PropTypes from \"prop-types\";\nimport {Button as MuiButton} from \"@material-ui/core\";\nimport React from \"react\";\n\nfunction Button(props) {\n    const {noMarginTop, ...other} = props;\n\n    return (\n        <MuiButton\n            fullWidth\n            color=\"primary\"\n            style={{\n                marginTop: noMarginTop ? 8 : 24\n            }}\n            variant=\"contained\"\n            {...other}/>\n    );\n}\n\nButton.defaultProps = {\n    noMarginTop: false\n};\n\nButton.propTypes = {\n    noMarginTop: PropTypes.bool\n};\n\nexport default Button;","import {FormControl, InputLabel, MenuItem, OutlinedInput, Select, TextField} from \"@material-ui/core\";\nimport React, {Component} from \"react\";\nimport ReactDOM from \"react-dom\";\n\nclass Input extends Component {\n    inputLabelRef = null;\n\n    componentDidMount() {\n        if (this.inputLabelRef) {\n            this.setState({\n                labelWidth: ReactDOM.findDOMNode(this.inputLabelRef).offsetWidth\n            });\n        }\n    }\n\n    render() {\n        const {label, options, type, ...other} = this.props;\n\n        if (type === \"select\") {\n            return (\n                <FormControl\n                    fullWidth\n                    margin=\"normal\"\n                    variant=\"outlined\">\n                    <InputLabel\n                        ref={ref => this.inputLabelRef = ref}\n                        variant=\"outlined\">\n                        {label}\n                    </InputLabel>\n                    <Select\n                        input={\n                            <OutlinedInput labelWidth={this.state.labelWidth}/>\n                        }\n                        variant=\"outlined\"\n                        {...other}>\n                        {options.map(option => <MenuItem key={option} value={option}>{option}</MenuItem>)}\n                    </Select>\n                </FormControl>\n            )\n        } else {\n            return (\n                <TextField\n                    fullWidth\n                    margin=\"normal\"\n                    variant=\"outlined\"\n                    {...this.props}/>\n            )\n        }\n    }\n\n    state = {\n        labelWidth: 0\n    };\n}\n\nexport default Input;","import * as PropTypes from 'prop-types';\nimport {ActiveUser, permissionLevels} from \"../settings\";\nimport {AppBar, Toolbar, Typography, Drawer, IconButton, List, ListItem, ListItemText} from '@material-ui/core';\nimport React, {Component, Fragment} from 'react';\nimport {Menu} from \"@material-ui/icons\";\nimport {withStyles} from '@material-ui/core/styles';\nimport {routes} from \"../settings\";\nimport {withRouter} from \"react-router-dom\";\n\nclass Dashboard extends Component {\n    closeDrawer = () => {\n        this.setState({\n            open: false\n        });\n    };\n\n    openDrawer = () => {\n        this.setState({\n            open: true\n        });\n    };\n\n    static propTypes = {\n        children: PropTypes.any.isRequired,\n        classes: PropTypes.object.isRequired,\n        title: PropTypes.string.isRequired\n    };\n\n    render() {\n        const {children, classes, title} = this.props;\n        return (\n            <ActiveUser.Consumer>{\n                activeUser => (\n                    <Fragment>\n                        <AppBar>\n                            <Toolbar className={classes.toolbar}>\n                                <IconButton className={classes.menuButton} color=\"inherit\" onClick={this.openDrawer}>\n                                    <Menu/>\n                                </IconButton>\n                                <Typography color=\"inherit\" component=\"h1\" variant=\"h5\">{title}</Typography>\n                            </Toolbar>\n                        </AppBar>\n                        <Drawer classes={{paper: classes.drawerPaper}} onClose={this.closeDrawer} open={this.state.open}\n                                variant=\"temporary\">\n                            <List>\n                                <ListItem>\n                                    <ListItemText>\n                                        <Typography variant=\"h5\">Member System</Typography>\n                                    </ListItemText>\n                                </ListItem>\n                                {Object.values(routes.private).map(route => permissionLevels.indexOf(activeUser[\"Permission Level\"]) > route.minPermissionLevel || \"Standard\"\n                                    ? <ListItem button key={route.path}\n                                                onClick={() => this.props.history.push(route.path)}>\n                                        <ListItemText>{route.label}</ListItemText>\n                                    </ListItem>\n                                    : null)}\n                            </List>\n                        </Drawer>\n                        <div className={classes.contentSpacer}/>\n                        {children}\n                    </Fragment>\n                )\n            }</ActiveUser.Consumer>\n        );\n    }\n\n    state = {\n        open: false\n    };\n\n    static styles = theme => ({\n        contentSpacer: {\n            ...theme.mixins.toolbar\n        },\n        drawerPaper: {\n            width: 300\n        },\n        menuButton: {\n            marginLeft: -12,\n            marginRight: theme.spacing.unit\n        },\n        toolbar: {\n            alignItems: \"center\",\n            display: \"flex\"\n        }\n    });\n}\n\nexport default withStyles(Dashboard.styles)(withRouter(Dashboard));\n"],"sourceRoot":""}